{{template "base" .}}

{{define "content"}}
<div class="card">
    <div style="display: flex; align-items: center; gap: 2rem; margin-bottom: 2rem;">
        <div style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden;">
            {{if .user.AvatarFile}}
                <img src="/static/uploads/avatars/{{.user.AvatarFile}}" alt="{{.user.Username}}" style="width: 100%; height: 100%; object-fit: cover;">
            {{else}}
                <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; display: flex; align-items: center; justify-content: center; font-size: 2.5rem;">
                    {{slice .user.Username 0 1}}
                </div>
            {{end}}
        </div>
        <div>
            <h1>{{.user.Username}}</h1>
            <p style="color: #666;">æ³¨å†Œäº {{formatTime .user.CreatedAt}}</p>
            <p style="color: #666;">æœ€åç™»å½• {{formatTime .user.LastLogin}}</p>
            {{if eq .user.ID .userID}}
                <form method="POST" action="/upload_avatar" enctype="multipart/form-data" style="margin-top: 1rem;">
                    <input type="file" name="avatar" accept="image/*" style="margin-bottom: 0.5rem;">
                    <button type="submit" class="btn btn-secondary">æ›´æ¢å¤´åƒ</button>
                </form>
            {{end}}
        </div>
    </div>
    
    <h2>ä¸Šä¼ çš„è§†é¢‘ ({{len .videos}})</h2>
</div>

{{if .videos}}
<div class="video-grid">
    {{range .videos}}
    <div class="video-card">
        <a href="/play/{{.VideoFilename}}">
            <img src="/static/uploads/covers/{{.CoverFilename}}" alt="{{.Title}}" class="video-thumbnail">
        </a>
        <div class="video-info">
            <h3 class="video-title">{{.Title}}</h3>
            <div class="video-meta">
                <span>{{formatTime .CreatedAt}}</span>
                <span>ğŸ‘ï¸ {{formatNumber .PlayCount}}</span>
            </div>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="card">
    <p style="text-align: center; color: #666; padding: 2rem 0;">è¯¥ç”¨æˆ·è¿˜æ²¡æœ‰ä¸Šä¼ è§†é¢‘</p>
</div>
{{end}}
{{end}}